#!/bin/bash


set -e
set -x


function run-dev {
    pip install -e .
    gunicorn projects.app:app --bind 0.0.0.0:8000 --reload
}


function run-ci {
    pip install -e .
    pip install pytest
    pytest tests
}


function run-prod {
    gunicorn projects.app:app --bind 0.0.0.0:8000
}


function main {
    case "$1" in
        dev )
            run-dev
            ;;
        ci )
            run-ci
            ;;
        prod )
            run-prod
            ;;
    esac
}


main $1
